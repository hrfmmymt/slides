<html>
  <head>
    <title>PWA å‹‰å¼·ä¼šè³‡æ–™ - 2018/01/26</title>
    <link rel="stylesheet" href="lib/talkie.min.css">
    <link rel="stylesheet" href="lib/talkie-default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/monokai_sublime.min.css">
    <link rel="stylesheet" href="dist/style.css">
  </head>
  <body>

  <script layout="cover" invert type="text/x-markdown" backface="images/cover1.JPG" backface-filter="blur(1px) brightness(.8)" class="darkness">
  ## PWA å‹‰å¼·ä¼š
  ## 2018/01/26 16:00~17:00
  ## @ å¤§ä¼šè­°å®¤
  </script>

  <script layout="cover" type="text/x-markdown" backface="images/cover2.JPG" backface-filter="blur(1px) brightness(.8)" class="darkness">

  # Progressive Web Apps

  </script>


  <script layout="bullets" type="text/x-markdown" backface="images/googling.png">
  </script>

  <script layout="bullets" type="text/x-markdown">
  <img src="images/firstpwa.png" width="60%">

  [https://medium.com/@slightlylate/progressive-apps-escaping-tabs-without-losing-our-soul-3b93a8561955](https://medium.com/@slightlylate/progressive-apps-escaping-tabs-without-losing-our-soul-3b93a8561955)

  </script>

  <script layout="bullets" type="text/x-markdown" backface="images/firstpwa.png" backface-filter="blur(1px) brightness(.1)" class="darkness">

  - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  - ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥
  - ã¨ã‹ï¼ˆå¾Œã§ï¼‰
  ## ã‚’ç·ç§°ã—ãŸã‹ã£ãŸ

  </script>

  <script layout="bullets" type="text/x-markdown">
  <img src="images/pwanow.png">

  [https://developers.google.com/web/progressive-web-apps/](https://developers.google.com/web/progressive-web-apps/)
  </script>

  <script layout="bullets" type="text/x-markdown">
  ## æ¦‚è«–
  - Reliable - Load instantly and never show the downasaur, even in uncertain network conditions.
  - ä¿¡é ¼æ€§ - ä¸å®‰å®šãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯çŠ¶æ³ã§ã‚ã£ã¦ã‚‚ã€å³åº§ã«ãƒ­ãƒ¼ãƒ‰ã—ã¦ãƒ€ã‚¦ãƒŠã‚½ãƒ¼ã‚’è¡¨ç¤ºã—ãªã„ã
  </script>

  <script layout="bullets" type="text/x-markdown" backface="images/downasaur.jpg">
  </script>

  <script layout="bullets" type="text/x-markdown">
  ## æ¦‚è«–
  - Fast - Respond quickly to user interactions with silky smooth animations and no janky scrolling.
  - é€Ÿã„ - ãªã‚ã‚‰ã‹ã§ã‚¹ãƒ ãƒ¼ã‚ºãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ã‚¸ãƒ£ãƒ³ã‚¯ã—ãªã„ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã«ç´ æ—©ãå¯¾å¿œã™ã‚‹ï¼ˆè§£é‡ˆãƒ ã‚ºã„)
  </script>

  <script layout="bullets" type="text/x-markdown">
  ## æ¦‚è«–
  - Engaging - Feel like a natural app on the device, with an immersive user experience.
  - é­…åŠ›çš„ - æ²¡å…¥å‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã‚’å‚™ãˆãŸã€ãƒ‡ãƒã‚¤ã‚¹ä¸Šã®ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¢ãƒ—ãƒªã®ã‚ˆã†ãªæ„Ÿè¦š
  </script>

  <script layout="bullets" type="text/x-markdown">
  ### [Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
  #### Baseline Progressive Web App Checklist
  - Site is served over HTTPS
  - ã‚µã‚¤ãƒˆãŒ HTTPS ã§é…ä¿¡ã•ã‚Œã‚‹ã“ã¨
  </script>

  <script layout="bullets" type="text/x-markdown">
  ### [Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
  #### Baseline Progressive Web App Checklist
  - Pages are responsive on tablets & mobile devices
  - RWDï¼ˆãƒ¢ãƒã‚¤ãƒ«ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ï¼‰
  </script>

  <script layout="bullets" type="text/x-markdown">
  ### [Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
  #### Baseline Progressive Web App Checklist
  - All app URLs load while offline
  - å…¨ã¦ã® URL ãŒã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§èª­ã¿è¾¼ã¾ã‚Œã‚‹
  </script>

  <script layout="bullets" type="text/x-markdown">
  ### [Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
  #### Baseline Progressive Web App Checklist
  - Metadata provided for Add to Home screen
  - "Add to Home screen" ã§ãã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æä¾›ã™ã‚‹
  </script>

  <script layout="bullets" type="text/x-markdown">
  ### [Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
  #### Baseline Progressive Web App Checklist
  - First load fast even on 3G
  - åˆå›ãƒ­ãƒ¼ãƒ‰ãŒ 3G å›ç·šã§ã‚‚é«˜é€Ÿã§ã‚ã‚‹
  </script>

  <script layout="bullets" type="text/x-markdown">
  ### [Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
  #### Baseline Progressive Web App Checklist
  - Site works cross-browser
  - ã‚¯ãƒ­ã‚¹ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ä½œã™ã‚‹
  </script>

  <script layout="bullets" type="text/x-markdown">
  ### [Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
  #### Baseline Progressive Web App Checklist
  - Page transitions don't feel like they block on the network
  - ãƒšãƒ¼ã‚¸é·ç§»ã‚’ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã«ã¯æ„Ÿã˜ã•ã›ãªã„  
  ( ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å¾…ã£ã¦ã‚‹é–“ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã¨ã‹å‡ºã—ã¨ã‘ã£ã¦ã“ã¨ã‚‰ã—ã„ )
  ( SPA? )
  </script>

  <script layout="bullets" type="text/x-markdown">
  ### [Progressive Web App Checklist](https://developers.google.com/web/progressive-web-apps/checklist)
  #### Baseline Progressive Web App Checklist
  - Each page has a URL
  - å„ãƒšãƒ¼ã‚¸ã«ã¯URLãŒã‚ã‚‹
  </script>

  <script layout="bullets" type="text/x-markdown" backface="images/lighthouse.png" class="lighthouse">
  # [Lighthouse](https://developers.google.com/web/tools/lighthouse/?hl=ja)
  </script>

  <script layout="bullets" type="text/x-markdown" backface="images/chromelighthouse.png" class="bottom-link">
  <small><a href="https://r.nikkei.com/">https://r.nikkei.com/</a></small>
  </script>

  <script layout="bullets" type="text/x-markdown" backface="images/suumo.png" class="bottom-link">
  <small><a href="https://smp.suumo.jp/">https://smp.suumo.jp/</a></small>
  </script>

  <script layout="bullets" type="text/x-markdown" backface="images/najimu.jpg" backface-filter="blur(7px) brightness(1)">
  - ğŸ™†â€æ®µéšï¼ˆéƒ¨åˆ†ï¼‰çš„ã«å°å…¥ã§ãã‚‹
    - Lighthouse 100ç‚¹ã§ãªãã¦ã‚‚ã„ã„
    - 100ç‚¹ã®é”æˆãŒãã®ã‚¢ãƒ—ãƒªã®ã‚´ãƒ¼ãƒ«ã¨ã„ã†ã‚ã‘ã§ã‚‚ãªã„
  - ğŸ™†â€æ—¢å­˜ã‚µãƒ¼ãƒ“ã‚¹ã«ã‚‚å°å…¥ã§ãã‚‹
  </script>

  <script layout="bullets" type="text/x-markdown">
  # WebAppManifest
  ## manifest.json
  - Add to homescreen
    - -icon
  - Splash screen
  - theme-color ( `<meta>` )
  - Full screen ( "display": "standalone || browser" )
  - "orientation": "portrait || landscape"
  </script>

  <script layout="code" type="text/x-markdown" class="manifest">
  ```manifest.json
  {
    "lang": "ja",
    "name": "SUUMO",
    "short_name": "SUUMO",
    "icons": [{
      "src": "/launcher-icon-3x.png",
      "sizes": "144x144",
      "type": "image/png"
    }, {
      "src": "/splashscreen-icon-192x192.png",
      "sizes": "192x192",
      "type": "image/png"
    }, {
      "src": "/splashscreen-icon-256x256.png",
      "sizes": "256x256",
      "type": "image/png"
    }, {
      "src": "/splashscreen-icon-384x384.png",
      "sizes": "384x384",
      "type": "image/png"
    }, {
      "src": "/splashscreen-icon-512x512.png",
      "sizes": "512x512",
      "type": "image/png"
    }],
    "background_color": "#ffffff",
    "theme_color": "#ffffff",
    "start_url": "/apps/homescreen/",
    "display": "standalone",
    "gcm_sender_id": "926788163944"
  }
  ```
  </script>

  <script layout="bullets" type="text/x-markdown" backface="images/manifest.png">
  </script>

  <script layout="bullets" type="text/x-markdown">
  # Service Worker
  - intercept and handle network requests
  - Cache API
  - ( Push Notification )
  </script>

  <script layout="cover" type="text/x-markdown" backface="images/worker.png" invert backface-filter="blur(0px) brightness(.6)">
  # ğŸ‘€
  </script>

  <script layout="bullets" type="text/x-markdown">
  # (Web Worker)
  ç‰¹å®šã®ãƒšãƒ¼ã‚¸ã®ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å‹•ã JS
  </script>

  <script layout="bullets" type="text/x-markdown">
  # Service Worker
  ### ãƒ–ãƒ©ã‚¦ã‚¶ã®è¡¨ç¤ºã¨ã¯åˆ¥ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§å‹•ã JS Worker
  - ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹
  - DOM API æ“ä½œä¸å¯
  </script>

  <script layout="bullets" type="text/x-markdown">
  #### Service Worker
  <img src="images/caniuse.png">
  </script>

  <script layout="bullets" type="text/x-markdown">
  Safari ã¨ Edge ã®é–‹ç™ºç‰ˆã§ Service Worker ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ ON ã«ãªã£ã¦ã‚‹ï¼ˆç¾åœ¨ï¼‰
  - [https://webkit.org/blog/8042/release-notes-for-safari-technology-preview-46/](https://webkit.org/blog/8042/release-notes-for-safari-technology-preview-46/)
  - [https://blogs.windows.com/msedgedev/2017/12/19/service-workers-going-beyond-page/#q1fTICimFt420jpg.97](https://blogs.windows.com/msedgedev/2017/12/19/service-workers-going-beyond-page/#Yyg2YRX6LSlW8mT6.97)
  </script>

  <script layout="code" type="text/x-markdown">
  ```javascript
  // https://example.com/script/main.js
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js', {
      scope: '/'
    }).then(function(registration) {
      // ç™»éŒ²æˆåŠŸ
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    }).catch(function(err) {
      // ç™»éŒ²å¤±æ•— :(
      console.log('ServiceWorker registration failed: ', err);
    });
  }
  ```
  â€»Service Worker ã¯ HTTPS ã‹ localhost ã§å‹•ä½œ
  </script>

  <script layout="code" type="text/x-markdown">
  [Service Worker ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«](https://developers.google.com/web/fundamentals/primers/service-workers/lifecycle?hl=ja)
  ```javascript
  const CACHE_NAME = 'my-site-cache-v1';
  const urlsToCache = [
    '/',
    '/styles/main.css',
    '/script/main.js'
  ];

  self.addEventListener('install', function(event) {
    // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å‡¦ç†
    event.waitUntil(
      caches.open(CACHE_NAME)
        .then(function(cache) {
          console.log('Opened cache');
          return cache.addAll(urlsToCache);
        })
    );
  });
  ```
  </script>

  <script layout="code" type="text/x-markdown">
  [Service Worker ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«](https://developers.google.com/web/fundamentals/primers/service-workers/lifecycle?hl=ja)
  ```javascript
  self.addEventListener('fetch', function(event) {
    event.respondWith(
      caches.open(CACHE_NAME).then(function(cache) {
        return cache.match(event.request).then(function(response) {
          const fetchPromise = fetch(event.request).then(function(networkResponse) {
            cache.put(event.request, networkResponse.clone());
            return networkResponse;
          });
          return response || fetchPromise;
        });
      });
    );
  });
  ```
  </script>

  <script layout="bullets" type="text/x-markdown" class="cycle">
  <img src="https://camo.qiitausercontent.com/91424b3a365de2e3221f7e399dbe3ff019a31b23/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e616d617a6f6e6177732e636f6d2f302f35343835302f33643939386137612d643063312d626338372d636332372d3634356336643932643334622e706e67">

  [https://qiita.com/y_fujieda/items/f9e765ac9d89ba241154](https://qiita.com/y_fujieda/items/f9e765ac9d89ba241154)
  # ğŸ™
  </script>

  <script layout="code" type="text/x-markdown">
  â€»ã©ã“ã§è¨€ã†ã‹è¿·ã£ãŸã®ã§è¬ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã«ãªã£ãŸã‘ã©ã€CDN ã«ã‚‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥æŒ‡å®šã§ãã‚‹ã‚ˆ
  </script>

  <script layout="bullets" type="text/x-markdown" class="cycle">
  <a href="https://developers.google.com/web/tools/workbox/"><img src="https://developers.google.com/web/tools/workbox/thumb.png"></a>
  </script>

  <script layout="code" type="text/x-markdown">
  sw.js
  ```javascript
  importScripts('/node_modules/workbox-sw/build/workbox-sw.vX.X.X.prod.js');

  const workboxSW = new WorkboxSW();
  workboxSW.precache([
    {
      url: '/index.html',
      revision: 'bb121c',
    }, {
      url: '/styles/main.css',
      revision: 'acd123',
    }, {
      url: '/scripts/main.js',
      revision: 'a32caa',
    }
  ]);
  ```
  </script>

  <script layout="code" type="text/x-markdown" class="cycle">
  <a href="https://developers.google.com/web/tools/workbox/"><img src="https://developers.google.com/web/tools/workbox/thumb.png"></a>
  <a href="https://webpack.js.org/"><img src="https://developers.google.com/web/tools/workbox/images/third_party/webpack-logo.svg"></a>
  </script>

  <script layout="code" type="text/x-markdown">
  webpack.config.js
  ```javascript
  new WorkboxBuildWebpackPlugin({
    globDirectory: 'dist/public',
    globPatterns: ['*.{html,js,css}', 'images/**/*.{jpg,jpeg,png,gif,webp,svg}'],
    globIgnores: ['sw.js'],
    swSrc:'src/sw.js',
    swDest: 'dist/sw.js',
    templatedUrls: {
      '/app-shell': ['../views/index.hbs']
    }
  });
  ```
  [https://havelog.ayumusato.com/develop/pwa/e742-appshell_practice_with_webpack_and_workbox.html](https://havelog.ayumusato.com/develop/pwa/e742-appshell_practice_with_webpack_and_workbox.html)
  # ğŸ™
  </script>

  <script layout="cover" type="text/x-markdown">
  <img src="https://developers.google.com/web/fundamentals/architecture/images/appshell.png?hl=ja">
  </script>

  <script layout="bullets" type="text/x-markdown">
  # [App Shell ãƒ¢ãƒ‡ãƒ«](https://developers.google.com/web/fundamentals/architecture/app-shell?hl=ja)
  ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒæ©Ÿèƒ½ã™ã‚‹ãŸã‚ã«å¿…è¦ãªæœ€å°é™ã® HTMLã€CSSã€JavaScript (App Shell) ã‚’ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã§ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãŠãã“ã¨

  - App Shell
    - UI ã®éª¨çµ„ã¿
    - ã‚¢ãƒ—ãƒªã®èµ·å‹•ã«å¿…è¦ãªä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
    - å¤šãã®å ´åˆãƒ‡ãƒ¼ã‚¿ã¯å«ã¾ã‚Œãªã„
  </script>

  <script layout="code" type="text/x-markdown">
  ```jsx
  import React from 'react';
  import { renderToString } from 'react-dom/server';
  import { Provider } from 'react-redux';
  import escape from 'escape-html';
  import serialize from 'serialize-javascript';
  import App from '../containers/App';
  import configureStore from '../store/configureStore';

  const render = (state, metas) => {
    const store = configureStore(preloadedState);
    const root = renderToString(
      <Provider store={store}>
        <App />
      </Provider>,
    );
    return `<!doctype html>
      <html>
        <head>
          <title>${escape(metas.title)}</title>
        </head>
        <body>
          <div id="root">${root}</div>
          < script>
            window.__PRELOADED_STATE__ = ${serialize(state)}
          </ script>
          < script src="/build/index.bundle.js"></ script>
        </body>
      </html>
  `;
  };
  export default render;
  ```
  </script>

  <script layout="" type="text/x-markdown">
  # Examples

  - [https://pwa.rocks/](https://pwa.rocks/)
  - [https://pwa-directory.appspot.com/](https://pwa-directory.appspot.com/)
  </script>

  <script layout="code" type="text/x-markdown">
  <img src="https://res.cloudinary.com/wego/image/upload/v1494208522/wego_logos/white/wego-logo-JP.png">

  [https://www.wego.com/](https://www.wego.com/)
  </script>

  <script layout="" type="text/x-markdown">
  <img src="images/wego.png">
  </script>

  <script layout="" type="text/x-markdown">
  <img src="images/rnikkei.jpg">
  </script>

  <script layout="" type="text/x-markdown" backface="images/rnikkei.jpg" backface-filter="blur(2px) brightness(.4)" class="rnikkei">
  - CDN (Fastly) ã§ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚­ãƒ£ãƒƒã‚·ãƒ¥
  - ServiceWorker
  - Resource  Hints ã§å…ˆè¡Œèª­ã¿è¾¼ã¿
  - HTTP/2
  - WebP

  <small><a href="https://note.mu/konpyu/n/n9fd5b81f6305">https://note.mu/konpyu/n/n9fd5b81f6305</a></small>
  ### ğŸ™
  </script>

  <script layout="cover" type="text/x-markdown">
  <a href="https://dev.to/ben/making-devto-insanely-fast"><img src="https://res.cloudinary.com/practicaldev/image/fetch/s--PP397znZ--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/http://i.imgur.com/Q01pEZb.png"></a>
  </script>

  <script layout="" type="text/x-markdown" backface="https://res.cloudinary.com/practicaldev/image/fetch/s--PP397znZ--/c_imagga_scale,f_auto,fl_progressive,h_500,q_auto,w_1000/http://i.imgur.com/Q01pEZb.png" backface-filter="blur(2px) brightness(.4)" class="devto">

  <blockquote class="hatena-bookmark-comment"><a class="comment-info" href="http://b.hatena.ne.jp/entry/348983189/comment/yosuke_furukawa" data-user-id="yosuke_furukawa" data-entry-url="http://b.hatena.ne.jp/entry/s/dev.to/ben/making-devto-insanely-fast" data-original-href="https://dev.to/ben/making-devto-insanely-fast" data-entry-favicon="https://cdn-ak.favicon.st-hatena.com/?url=https%3A%2F%2Fdev.to%2F" data-user-icon="/users/yosuke_furukawa/profile.png">Making dev.to insanely fast</a><br><p style="clear: left">dev.to ãŒé«˜é€ŸåŒ–ã®ãŸã‚ã«ã‚„ã£ã¦ã‚‹æ–½ç­–ã€‚ 1. CDNã‚’ä½¿ã£ã¦fastlyã‹ã‚‰ ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ¸ˆã¿ã®HTMLé…ä¿¡ã€‚2. render-blockã‚¹ã‚¿ã‚¤ãƒ«æ’²æ»… 3. Cloudinaryã‹ã‚‰webpã§ç”»åƒé…ä¿¡ã€å¤§ããªç”»åƒã¯èƒŒæ™¯è‰²ã‚’å…¥ã‚Œã‚‹ã€‚ 4. å¤–éƒ¨CSSã¨ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ³ãƒˆä½¿ã‚ãªã„ã€‚</p><span class="datetime-body">2017/11/15 13:44</span></blockquote>

  <small><a href="http://b.hatena.ne.jp/entry/348983189/comment/yosuke_furukawa">http://b.hatena.ne.jp/entry/348983189/comment/yosuke_furukawa</a></small>
  ### ğŸ™
  </script>

  <script layout="" type="text/x-markdown">
  # PRPL ãƒ‘ã‚¿ãƒ¼ãƒ³

  - Push: æœ€åˆã® URL ãƒ«ãƒ¼ãƒˆã«ä¸å¯æ¬ ãªãƒªã‚½ãƒ¼ã‚¹ã‚’ Pushï¼ˆãƒ—ãƒƒã‚·ãƒ¥ï¼‰ã™ã‚‹ã€‚
  - Render: æœ€åˆã®ãƒ«ãƒ¼ãƒˆã‚’ Renderï¼ˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰ã™ã‚‹ã€‚
  - Pre-cache: æ®‹ã‚Šã®ãƒ«ãƒ¼ãƒˆã‚’ Pre-cacheï¼ˆäº‹å‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼‰ã™ã‚‹ã€‚
  - Lazy-load: ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã§æ®‹ã‚Šã®ãƒ«ãƒ¼ãƒˆã‚’ Lazy-loadï¼ˆé…å»¶èª­ã¿è¾¼ã¿ï¼‰ã™ã‚‹ã€‚

  <a href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/?hl=ja"><small>https://developers.google.com/web/fundamentals/performance/prpl-pattern/?hl=ja</small></a>
  </script>

  <script layout="bullets" type="text/x-markdown">
  # Push Notification

  <img src="images/push-cycle1.jpg">
  </script>

  <script layout="bullets" type="text/x-markdown">
  #### Push Notification

  <img src="images/push-cycle2.jpg">
  </script>

  <script layout="code" type="text/x-markdown">
  ```javascript
  // https://example.com/script/main.js
  import * as firebase from 'firebase';

  ...

  const messaging = firebase.messaging();
  messaging.requestPermission()
    .then(function () {
      console.log('Notification permission granted.');
      messaging.getToken()
        .then(function (currentToken) {
          sendTokenToServer(currentToken);
        })
        .catch(function (err) {
          console.log('An error occurred while retrieving token. ', err);
        });
    })
    .catch(function (err) {
      console.log('Unable to get permission to notify.', err);
  });
  ```
  </script>

  <script layout="code" type="text/x-markdown">
  ```json
  curl -X POST -H "Authorization: key=YOUR-SERVER-KEY" -H
  "Content-Type: application/json" -d '{
    "notification": {
      "title": "Portugal vs. Denmark",
      "body": "5 to 1",
      "icon": "firebase-logo.png",
      "click_action": "http://localhost:8081"
    },
    "to": "DEVICE_REGISTRATION_TOKEN"
  }' "https://fcm.googleapis.com/fcm/send"
  ```
  </script>

  <script layout="code" type="text/x-markdown">
  ```javascript
  // https://example.com/script/main.js
  messaging.setBackgroundMessageHandler(function(payload) {
    console.log('[main.js] Received background message ', payload);
    // Customize notification here
    const notificationTitle = 'Background Message Title';
    const notificationOptions = {
      body: 'Background Message body.',
      icon: '/firebase-logo.png'
    };

    return self.registration.showNotification(notificationTitle,
    notificationOptions);
  });
  ```
  </script>

  <script layout="bullets" type="text/x-markdown">
  #### Push Notification

  <img src="https://blog.kissmetrics.com/wp-content/uploads/2015/11/push-notifications-desktop-mobile.png">
  </script>

  <script layout="bullets" type="text/x-markdown">
  <img src="images/badux.png">

  [https://developers.google.com/web/fundamentals/push-notifications/permission-ux#ux](https://developers.google.com/web/fundamentals/push-notifications/permission-ux#ux)

  </script>

  <script layout="bullets" type="text/x-markdown">
  # Payment Request API

  <img src="https://developers.google.com/web/fundamentals/payments/images/5_9_payment_request_ui.png?hl=ja" width="250">
  </script>

  <script layout="bullets" type="text/x-markdown">
  #### Payment Request API
  - æ”¯æ‰•ã„ãƒ•ã‚©ãƒ¼ãƒ  UI ã®æä¾›
    - æ”¯æ‰•ã„ã«å¿…è¦ãªæƒ…å ±ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ãƒ»ãƒ•ã‚©ãƒ¼ãƒ ã«è‡ªå‹•ã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ã«ã‚ˆã‚‹æ”¯æ‰•ã„ãƒ•ãƒ­ãƒ¼ã®ç°¡ç•¥åŒ–
    - æ±ºæ¸ˆã«ã¯åˆ¥é€”ã‚²ãƒ¼ãƒˆã‚¦ã‚§ã‚¤ãŒå¿…è¦ ( PAY.JP, stripe... )
    - ç¾åœ¨ã¯ä¸»è¦ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã®ã¿å¯¾å¿œã€Android Pay, PayPal å¯¾å¿œäºˆå®š
  </script>

  <script layout="code" type="text/x-markdown">
  ```javascript
  function pay(details) {
    // Define the type of card
    ...

    const request = new PaymentRequest(methodData, details, options);

    request.show().then(result => {
      return Promise.race([
        fetch('/pay', {
          method: 'POST',
          credentials: 'include',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(result.toJSON())
        })
      ])
      .then(response => {
        if (response.status === 200) {
          return result.complete('success');
        } else {
          return result.complete('fail');
        }
      })
      .catch(() => result.complete('fail'));
    });
  }
  ```
  </script>

  <script layout="code" type="text/x-markdown">
  ```javascript
  function onBuyClicked(event) {
    pay({
      displayItems: [{
        label: event.target.parentNode.dataset.label,
        amount: {
          currency: 'JPY',
          value: event.target.parentNode.dataset.value
        }
      }, {
        label: 'Friends and family discount',
        amount: {
          currency: 'JPY',
          value : '-10'
        },
        pending: true
      }],
      total: {
        label: 'Total',
        amount: {
          currency: 'JPY',
          value: Number(event.target.parentNode.dataset.value) - 10
        }
      }
    });
  }
  ```
  </script>

  <script layout="" type="text/x-markdown">
  #### Payment Request API
  <img src="images/payment.png">
  </script>

  <script layout="bullets" type="text/x-markdown">
  # Credential Management API

  <img src="images/cred.jpg" width="750">
  </script>

  <script layout="bullets" type="text/x-markdown">
  #### Credential Management API
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ UI
    - èªè¨¼æƒ…å ±ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã«ä¿å­˜ãƒ»æ›´æ–°
    - ã‚¢ã‚«ã‚¦ãƒ³ãƒˆé¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°
    - è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³
  </script>

  <script layout="code" type="text/x-markdown">
  ```javascript
  if (navigator.credentials) {
    event.preventDefault()

    const c = new PasswordCredential(event.target)
    const init = {
      method: 'POST',
      credentials: c
    }

    navigator.credentials.store(c)
  } else {
    alert('Your brouser does not support credential management')
  }
  ```

  [https://github.com/hrfmmymt/credential-management-sample](https://github.com/hrfmmymt/credential-management-sample)
  </script>

  <script layout="code" type="text/x-markdown">
  ```javascript
  navigator.credentials.get({
    'password': true
  }).then(
    function(cred) {
      console.log(cred)
      if (cred) {
         alert('login as ' + cred.id)
      } else {
        alert('can not use credentials')
        return
      }
    }
  )
  ```

  [https://github.com/hrfmmymt/credential-management-sample](https://github.com/hrfmmymt/credential-management-sample)
  </script>

  <script layout="bullets" type="text/x-markdown">
  #### Credential Management API
  <img src="images/canicred.png">
  </script>

  <script layout="bullets" type="text/x-markdown">
  # AMP
  ## Accelerated Mobile Pages
  </script>

  <script layout="code" type="text/x-markdown">
  ```html
  <!doctype html>
  <html âš¡>
  <head>
  ...
  <style amp-custom>
  /* any custom styles go here. */
  body {
  background-color: white;
  }
  amp-img {
  border: 5px solid black;
  }

  amp-img.grey-placeholder {
  background-color: grey;
  }
  </style>
  ...
  </head>
  <body>
  ...
  </body>
  </html>
  ```
  </script>

  <script layout="code" type="text/x-markdown">
  ```html
  <amp-img
  class="grey-placeholder"
  src="https://placekitten.com/g/500/300"
  srcset="/img/cat.jpg 640w,
  /img/kitten.jpg 320w"
  width="500"
  height="300"
  layout="responsive">
  </amp-img>
  ````
  </script>

  <script layout="bullets" type="text/x-markdown">
  ## [AMP by Example](https://ampbyexample.com/)
  <img src="images/ampbyex.png" width="70%">
  </script>

  <script layout="code" type="text/x-markdown">
  ### amp-list
  ```html
  <!doctype html>
  <html âš¡>
  <head>
  < script async src="https://cdn.ampproject.org/v0.js"></ script>
  < script async custom-element="amp-list" src="https://cdn.ampproject.org/v0/amp-list-0.1.js"></ script>
  < script async custom-template="amp-mustache" src="https://cdn.ampproject.org/v0/amp-mustache-0.1.js"></ script>
  ...
  </head>
  <body>
  <amp-list width="auto" height="100" layout="fixed-height" src="https://ampbyexample.com/json/examples.json" class="m1">
    <template type="amp-mustache" id="amp-template-id">
      <div><a href="{{url}}">{{title}}</a></div>
    </template>
  </amp-list>
  </body>
  ```
  </script>

  <script layout="bullets" type="text/x-markdown">
  <img src="https://1.bp.blogspot.com/-ttRMKTXiERQ/Vs2YQ4UHkRI/AAAAAAAACGg/6JTDRRR02F4/s640/AMP.png">

  [https://developers-jp.googleblog.com/2016/02/google-accelerated-mobile-pages.html](https://developers-jp.googleblog.com/2016/02/google-accelerated-mobile-pages.html)
  </script>

  <script layout="bullets" type="text/x-markdown">
  #### AMP
  - ç‰¹å®šã®ãƒšãƒ¼ã‚¸ã ã‘å¯¾å¿œã§ã‚‚ OK
  - è«¸ã€…ã®ç¸›ã‚Šãƒ—ãƒ¬ã‚¤ã§æ¡ä»¶ã‚’æº€ãŸã—ã¦ AMP ã¨ãªã‚‹
    - AMP Validator  
  <img src="images/amp-valid.png" width="70%">
  </script>

  <script layout="bullets" type="text/x-markdown" backface="http://www.supagaijin.com/wp-content/themes/display/framework/includes/timthumb.php?src=/wp-content/uploads/2010/04/OOPS.jpg&h=273&w=610&zc=1" backface-filter="blur(4px) brightness(.3)" class="pwamp">
  # AMP as PWA
  # AMP to PWA
  # AMP in PWA

  [https://www.ampproject.org/ja/docs/guides/pwa-amp](https://www.ampproject.org/ja/docs/guides/pwa-amp)
  </script>

  <script layout="code" type="text/x-markdown">
  ### amp-install-serviceworker
  ```html
  <!doctype html>
  <html amp>
  <head>
    ...
    < script async src="https://cdn.ampproject.org/v0.js"></ script>
    < script async custom-element="amp-install-serviceworker" src="https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js"></ script>
  </head>
  <body>
    <amp-install-serviceworker
      src="https://www.your-domain.com/serviceworker.js"
      data-iframe-src="https://www.your-domain.com/install-serviceworker.html"
      layout="nodisplay">
    </amp-install-serviceworker>
  </body>
  </html>
  ```
  </script>

  <script layout="bullets" type="text/x-markdown">
  # AMP as PWA
  PWA ã®æ©Ÿèƒ½ã‚’å–ã‚Šå…¥ã‚ŒãŸ AMP ãƒšãƒ¼ã‚¸
  - å…ˆè¡Œèª­ã¿è¾¼ã¿ãƒ»ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ãªã©ãŒã§ãã‚‹ AMP
  </script>

  <script layout="bullets" type="text/x-markdown">
  # AMP to PWA
  PWA ã¸ã®ã‚¨ãƒ³ãƒˆãƒª ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã® AMP
  - å…¥ã‚Šå£ãŒ AMP
    - ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§ SW ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚ã¨ã¯æµã‚Œã§
  </script>

  <script layout="bullets" type="text/x-markdown">
  # AMP in PWA
  PWA ã§ AMP
  - PWA ã®ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã—ã¦ã® AMP

  [https://developers-jp.googleblog.com/2017/08/progressive-web-amp-amp-shadowreader.html](https://developers-jp.googleblog.com/2017/08/progressive-web-amp-amp-shadowreader.html)
  </script>

  <script layout="cover" type="text/x-markdown" backface="https://www.apple.com/jp/safari/images/og.png?201801120208" backface-filter="blur(2px) brightness(.4)" class="breaking">
  # BREAKâš¡NG
  </script>

  <script layout="" type="text/x-markdown">
  # Safari 11.1
  #### Safari 11.1 ships with iOS 11.3 and macOS 10.13.4. It is also available in macOS 10.12.6 and 10.11.6.

  - Service Workers
  - Payment Request API
  - Web App Manifest

  [https://developer.apple.com/library/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_11_1.html](https://developer.apple.com/library/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_11_1.html)
  </script>

  <script layout="bullets" invert type="text/x-markdown">

  # ãŠã—ã¾ã„

  ### ã”é™è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ

  </script>

  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
  <script src="lib/talkie.min.js"></script>
  <script>
  Talkie();

  // ãƒªãƒ³ã‚¯ã¯åˆ¥ã‚¿ãƒ–
  var i, links = document.querySelectorAll("a[href^='http']")
  for(i=0; i<links.length; i++) {
    links[i].setAttribute('target', '_blank');
  }
  </script>
  </body>
</html>